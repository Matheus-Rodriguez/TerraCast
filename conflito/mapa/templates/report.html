{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>TerraCast - Country Report</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            background-color: #222;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 22px;
        }

        .navbar {
            display: flex;
            align-items: center;
            height: 80px;
            background-color: #222;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar .nav-content {
            display: flex;
            align-items: center;
            width: 100%;
            gap: 60px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0px;
        }

        .logo-container img {
            height: 55px;
            width: auto;
        }

        .logo-container h1 {
            margin: 0;
            font-size: 24px;
            font-weight: bold;
            white-space: nowrap;
            color: white;
        }

        .navbar a {
            position: relative;
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 0 5px;
            white-space: nowrap;
            transition: color 0.3s ease;
            flex-grow: 0;
            font-family: 'Poppins', sans-serif;
        }

        .navbar a::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -4px;
            width: 0;
            height: 2px;
            background-color: #ff6666;
            transition: width 0.3s ease;
        }

        .navbar a:hover {
            color: #ff6666;
        }

        .navbar a:hover::after {
            width: 100%;
        }

        .content {
            padding: 60px 80px;
            line-height: 2.2;
            min-height: 100vh;
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            color: #ff6666;
            font-size: 3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        p.intro-text {
            max-width: 800px;
            margin: 0 auto 40px auto;
            font-size: 1.3rem;
            color: #ccc;
            text-align: center;
            line-height: 1.6;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }

        input[type="text"] {
            padding: 12px;
            font-size: 1.2rem;
            border: none;
            border-radius: 8px;
            margin-top: 10px;
            width: 300px;
            text-align: center;
        }

        button {
            margin-top: 20px;
            padding: 12px 24px;
            font-size: 1.1rem;
            background-color: #ff6666;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        button:hover {
            background-color: #e64e4e;
        }

        .label {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #ccc;
            text-align: center;
        }

        #loading {
            display: none;
            text-align: center;
            margin-bottom: 20px;
            color: #ff6666;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .result-html {
            background-color: #111;
            color: #eee;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 20px;
            max-height: 500px;
            overflow-y: auto;
            white-space: normal;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-content">
            <div class="logo-container">
                <img src="{% static 'logo.png' %}" alt="TerraCast Logo">
                <h1>TerraCast</h1>
            </div>
            <a href="{% url 'mapa_violence_3m' %}">Violence 3 months</a>
            <a href="{% url 'mapa_violence_12m' %}">Violence 12 months</a>
            <a href="{% url 'mapa_conflict_3m' %}">Conflict 3 months</a>
            <a href="{% url 'mapa_conflict_12m' %}">Conflict 12 months</a>
            <a href="{% url 'report' %}">Report</a>
            <a href="{% url 'model' %}">Model</a> 
            <a href="{% url 'about' %}">About</a>
        </div>
    </nav>

    <div class="content">
        <h1>ðŸ¤– Country Report</h1>

        <p class="intro-text">
            This tool uses artificial intelligence to analyze risks of armed conflict and violence in countries, based on historical data and forecasts for the upcoming months. 
            By entering the ISO code of the desired country, the system generates a detailed report, comparing the predictions with real events that occurred and evaluating data consistency. 
            The goal is to provide a clear and objective view to support political and strategic analyses.
        </p>

        <form method="POST" id="form-analise">
            {% csrf_token %}
            <label class="label" for="codigo_iso">Enter the country ISO code (e.g., COL, BOL, UKR):</label>
            <input type="text" name="codigo_iso" id="codigo_iso" placeholder="e.g. COL" value="{{ entrada }}">
            <button type="submit" id="btn-analise">Generate Report</button>
        </form>

        <div id="loading">Processing report, please wait...</div>

        {% if resposta %}
            <h2 style="color: #ff6666;">Result:</h2>
            <div class="result-html">
                {{ resposta|safe }}
            </div>
        {% endif %}
    </div>

    <script>
        const form = document.getElementById('form-analise');
        const loading = document.getElementById('loading');
        const btn = document.getElementById('btn-analise');

        form.addEventListener('submit', function () {
            loading.style.display = 'block';
            btn.disabled = true;
            btn.textContent = 'Generating...';
        });
    </script>

</body>
</html>
